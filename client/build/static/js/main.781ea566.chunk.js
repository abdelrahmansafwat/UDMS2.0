(this["webpackJsonpgovdas-frontend"]=this["webpackJsonpgovdas-frontend"]||[]).push([[0],{167:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return ve}));var n=a(42),i=a.n(n),r=a(79),c=a(66),s=a(7),o=a(72),l=a(2),d=a(0),u=a.n(d),j=a(4),b=a(39),p=a(254),h=a(261),O=a(263),m=a(189),x=a(188),g=a(109),f=a(43),v=a(81),y=a(44),w=a(253),C=a(59),S=a(252),N=a(170),k=a.n(N),B=a(172),D=a.n(B),T=a(54),P=a(80),I=a(36),W=a(171),R=a.n(W),q=a(174),A=a.n(q),E=a(175),L=a.n(E),U=a(177),F=a.n(U),V=a(176),M=a.n(V),_=a(168),H=a(110),z=a(134),Y=a(133),G=a(257),J=a(132),K=a(26),X=a(83),Q=a(180),Z=a(76),$=a(173),ee=a.n($),te=a(130),ae=a(92),ne=a(45),ie=a(67),re=a(82),ce=a(191),se=a(111),oe=a(41),le=a(178),de=a.n(le),ue=a(179),je=a(24),be=a(262),pe=a(258),he=a(71),Oe=a(122),me={palette:{type:"light"}},xe={palette:{type:"dark"}},ge=u.a.forwardRef((function(e,t){return Object(l.jsx)(Q.a,Object(o.a)({direction:"up",ref:t},e))}));function fe(){return Object(l.jsxs)(f.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(l.jsx)(S.a,{color:"inherit",href:"http://www.eelu.edu.eg/",children:"National Egyptian E-Learning University"})," ",(new Date).getFullYear(),"."]})}function ve(){var t=Object(b.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(c.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"75vh"},fixedHeight:{height:240},datagrid:{},dflex:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},paperChips:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5),margin:0},chip:{margin:e.spacing(.5)}}}))(),a=u.a.useState(!0),n=Object(s.a)(a,2),S=n[0],N=n[1],B=Object(d.useState)(oe.a.location.state.privilege),W=Object(s.a)(B,2),q=W[0],E=(W[1],Object(d.useState)("")),U=Object(s.a)(E,2),V=U[0],Q=U[1],$=Object(d.useState)([]),le=Object(s.a)($,2),ve=le[0],ye=le[1],we=Object(d.useState)(!1),Ce=Object(s.a)(we,2),Se=Ce[0],Ne=Ce[1],ke=Object(d.useState)(!1),Be=Object(s.a)(ke,2),De=Be[0],Te=Be[1],Pe=Object(d.useState)(!1),Ie=Object(s.a)(Pe,2),We=Ie[0],Re=Ie[1],qe=Object(d.useState)(!1),Ae=Object(s.a)(qe,2),Ee=Ae[0],Le=Ae[1],Ue=Object(d.useState)(!1),Fe=Object(s.a)(Ue,2),Ve=Fe[0],Me=Fe[1],_e=Object(d.useState)({}),He=Object(s.a)(_e,2),ze=He[0],Ye=He[1],Ge=Object(d.useState)(""),Je=Object(s.a)(Ge,2),Ke=Je[0],Xe=Je[1],Qe=Object(d.useState)(""),Ze=Object(s.a)(Qe,2),$e=Ze[0],et=Ze[1],tt=Object(d.useState)(""),at=Object(s.a)(tt,2),nt=at[0],it=at[1],rt=Object(d.useState)(new Date),ct=Object(s.a)(rt,2),st=ct[0],ot=ct[1],lt=Object(d.useState)([]),dt=Object(s.a)(lt,2),ut=dt[0],jt=dt[1],bt=Object(d.useState)([]),pt=Object(s.a)(bt,2),ht=pt[0],Ot=pt[1],mt=Object(d.useState)([]),xt=Object(s.a)(mt,2),gt=xt[0],ft=xt[1],vt=Object(d.useState)([]),yt=Object(s.a)(vt,2),wt=yt[0],Ct=yt[1],St=Object(d.useState)(!1),Nt=Object(s.a)(St,2),kt=Nt[0],Bt=Nt[1],Dt=Object(d.useState)(!1),Tt=Object(s.a)(Dt,2),Pt=Tt[0],It=Tt[1],Wt=Object(d.useState)(!1),Rt=Object(s.a)(Wt,2),qt=(Rt[0],Rt[1]),At=Object(d.useState)(!1),Et=Object(s.a)(At,2),Lt=(Et[0],Et[1]),Ut=Object(d.useState)("Add"),Ft=Object(s.a)(Ut,2),Vt=Ft[0],Mt=Ft[1],_t=Object(d.useState)({}),Ht=Object(s.a)(_t,2),zt=Ht[0],Yt=Ht[1],Gt=Object(d.useState)(""),Jt=Object(s.a)(Gt,2),Kt=Jt[0],Xt=Jt[1],Qt=Object(d.useState)(!1),Zt=Object(s.a)(Qt,2),$t=Zt[0],ea=Zt[1],ta=Object(d.useState)(!0),aa=Object(s.a)(ta,2),na=aa[0],ia=aa[1],ra=Object(d.useState)(""),ca=Object(s.a)(ra,2),sa=ca[0],oa=ca[1],la=Object(d.useState)(""),da=Object(s.a)(la,2),ua=da[0],ja=da[1],ba={PaperProps:{style:{maxHeight:224,width:250}}},pa=Object(he.a)(na?me:xe),ha=[{field:"id",headerName:"ID",width:70,filterable:!1},{field:"title",headerName:"Title",width:130},{field:"issuedby",headerName:"Issued By",width:130},{field:"summary",headerName:"Summary",width:130},{field:"date",headerName:"Date",type:"date",width:130},{field:"viewButton",headerName:"View",width:130,disableClickEventBubbling:!0,filterable:!1,sortable:!1,renderCell:function(t){var a=t.row.id,n=function(){var t=Object(r.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Viewing decision #"+a),n=ve[a-1],t.next=4,Oe.get("/api/retrieve_decisions/image/"+n.image,{responseType:"arraybuffer"}).then((function(t){return n.imageBase64="data:;base64,"+e.from(t.data,"binary").toString("base64")}));case 4:Ye(n),Te(!0);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(l.jsx)(K.a,{variant:"contained",onClick:function(){return n()},disabled:q<2,children:"View"})}},{field:"updateButton",headerName:"Update",width:130,disableClickEventBubbling:!0,sortable:!1,filterable:!1,renderCell:function(e){var t=function(){var t=Object(r.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Xe(e.row.title),et(e.row.summary),ft(e.row.tags),it(e.row.issuedby),ot(e.row.date),Mt("Update"),Bt(!1),It(!1),Lt(!1),qt(!1),Re(!0);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(l.jsx)(K.a,{variant:"contained",color:"primary",onClick:function(){return t()},disabled:q<2,children:"Update"})}},{field:"deleteButton",headerName:"Delete",width:130,disableClickEventBubbling:!0,sortable:!1,filterable:!1,renderCell:function(e){var t=e.row.id,a=function(){var e=Object(r.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Viewing decision #"+t),a=ve[t-1],n=ve,Oe.post("/api/upload_decisions/delete",{_id:a._id,oldimage:a.image}).then((function(e){console.log(e),console.log(n.length),n.splice(t-1,1),console.log(n.length),ye(n)})).catch((function(e){console.log(e),e&&(Q("An error occured. Please try again."),Ne(!0))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsx)(K.a,{variant:"contained",color:"secondary",onClick:function(){return a()},disabled:q<2,children:"Delete"})}}],Oa=function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(q>0)){e.next=8;break}return Oe.create({baseURL:window.location.origin}),e.next=4,Oe.get("/api/retrieve_decisions/all").then((function(e){var t=e.data.decisions;t.forEach((function(e,a){t[a].id=a+1,t[a].date=new Date(t[a].date).toLocaleDateString(),t[a].updateButton=Object(l.jsx)(K.a,{variant:"contained",color:"primary",children:"Update"})})),console.log(t),ye(t)})).catch((function(e){console.log(e),Ne(!0),Q("An error occured. Please try again.")}));case 4:return e.next=6,Oe.post("/api/var/retrieve",{name:"tags"}).then((function(e){var t=e.data.vars[0].vars;console.log(t),jt(t)})).catch((function(e){console.log(e),Ne(!0),Q("An error occured. Please try again.")}));case 6:return e.next=8,Oe.post("/api/var/retrieve",{name:"issuers"}).then((function(e){var t=e.data.vars[0].vars;console.log(t),Ot(t)})).catch((function(e){console.log(e),Ne(!0),Q("An error occured. Please try again.")}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ve){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Oa();case 4:Me(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();return Object(l.jsx)(pe.a,{theme:pa,children:Object(l.jsxs)("div",{className:t.root,children:[Object(l.jsx)(p.a,{}),Object(l.jsx)(m.a,{position:"absolute",className:Object(j.a)(t.appBar,S&&t.appBarShift),children:Object(l.jsxs)(x.a,{className:t.toolbar,children:[Object(l.jsx)(y.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){N(!0)},className:Object(j.a)(t.menuButton,S&&t.menuButtonHidden),children:Object(l.jsx)(k.a,{})}),Object(l.jsx)(f.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title,children:"Dashboard"}),Object(l.jsx)(y.a,{color:"inherit",onClick:function(){return ia(!na)},children:Object(l.jsx)(R.a,{})})]})}),Object(l.jsxs)(h.a,{variant:"permanent",classes:{paper:Object(j.a)(t.drawerPaper,!S&&t.drawerPaperClose)},open:S,children:[Object(l.jsx)("div",{className:t.toolbarIcon,children:Object(l.jsx)(y.a,{onClick:function(){N(!1)},children:Object(l.jsx)(D.a,{})})}),Object(l.jsx)(v.a,{}),Object(l.jsx)(g.a,{children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(T.a,{button:!0,onClick:function(e){e.preventDefault(),e.stopPropagation(),Oa()},children:[Object(l.jsx)(P.a,{children:Object(l.jsx)(ee.a,{})}),Object(l.jsx)(I.a,{primary:"Refresh"})]}),q>1&&Object(l.jsxs)(T.a,{button:!0,onClick:function(e){e.preventDefault(),e.stopPropagation(),Xe(""),et(""),it(""),ot(new Date),Mt("Add"),Bt(!1),It(!1),Lt(!1),qt(!1),Re(!0)},children:[Object(l.jsx)(P.a,{children:Object(l.jsx)(A.a,{})}),Object(l.jsx)(I.a,{primary:"Add Decision"})]}),q>1&&Object(l.jsxs)(T.a,{button:!0,onClick:function(e){e.preventDefault(),e.stopPropagation(),Le(!0)},children:[Object(l.jsx)(P.a,{children:Object(l.jsx)(L.a,{})}),Object(l.jsx)(I.a,{primary:"Add Tags/Issuers"})]})]})}),Object(l.jsx)(v.a,{}),Object(l.jsx)(g.a,{children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(T.a,{button:!0,children:[Object(l.jsx)(P.a,{children:Object(l.jsx)(M.a,{})}),Object(l.jsx)(I.a,{primary:"User"})]}),Object(l.jsxs)(T.a,{button:!0,onClick:function(e){e.preventDefault(),e.stopPropagation(),oe.a.push("/login")},children:[Object(l.jsx)(P.a,{children:Object(l.jsx)(F.a,{})}),Object(l.jsx)(I.a,{primary:"Logout"})]})]})})]}),Object(l.jsxs)("main",{className:t.content,children:[Object(l.jsx)("div",{className:t.appBarSpacer}),Object(l.jsxs)(w.a,{maxWidth:"lg",className:t.container,children:[Object(l.jsx)(C.a,{className:t.paper,children:Object(l.jsx)(_.a,{rows:ve,columns:ha,pageSize:5,checkboxSelection:!0,className:t.datagrid,showToolbar:!0,filterModel:{items:[{columnField:"title",operatorValue:"contains",value:""}]}})}),Object(l.jsx)(O.a,{pt:4,children:Object(l.jsx)(fe,{})})]}),Object(l.jsxs)(H.a,{open:Se,TransitionComponent:ge,keepMounted:!0,onClose:function(){return Ne(!1)},"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(l.jsx)(J.a,{id:"alert-dialog-slide-title",children:"Error"}),Object(l.jsx)(Y.a,{children:Object(l.jsx)(G.a,{id:"alert-dialog-slide-description",children:V})}),Object(l.jsx)(z.a,{children:Object(l.jsx)(K.a,{onClick:function(){return Ne(!1)},color:"primary",children:"Close"})})]}),Object(l.jsxs)(H.a,{open:Ee,TransitionComponent:ge,keepMounted:!0,onClose:function(){return Le(!1)},"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(l.jsx)(J.a,{id:"alert-dialog-slide-title",children:"Add Tags or Issuers"}),Object(l.jsx)(Y.a,{children:Object(l.jsxs)(Z.a,{container:!0,direction:"column",spacing:1,className:t.dflex,children:[Object(l.jsx)(Z.a,{item:!0,xs:6,children:Object(l.jsx)(X.a,{value:sa,variant:"outlined",margin:"normal",fullWidth:!0,id:"addTagIssuer",label:"Tag or Issuer",name:"addTagIssuer",onChange:function(e){oa(e.target.value)}})}),Object(l.jsx)(Z.a,{item:!0,xs:3,children:Object(l.jsx)(ie.a,{variant:"outlined",fullWidth:!0,children:Object(l.jsxs)(re.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",value:ua,onChange:function(e){ja(e.target.value)},input:Object(l.jsx)(te.a,{id:"select-multiple-chip"}),MenuProps:ba,children:[Object(l.jsx)(ne.a,{value:"Tag",children:Object(l.jsx)(I.a,{primary:"Tag"})},"Tag"),Object(l.jsx)(ne.a,{value:"Issuer",children:Object(l.jsx)(I.a,{primary:"Issuer"})},"Issuer")]})})}),Object(l.jsx)(Z.a,{item:!0,xs:3,children:Object(l.jsx)(K.a,{variant:"contained",color:"primary",component:"span",fullWidth:!0,onClick:function(e){e.preventDefault(),e.stopPropagation(),Oe.create({baseURL:window.location.origin}),Oe.post("/api/var/update",{name:ua.toLowerCase()+"s",var:sa}).then((function(e){if(console.log(e),Le(!1),"Tag"===sa){var t=ut;t.push(sa),jt(t)}else{var a=ht;a.push(sa),Ot(a)}})).catch((function(e){console.log(e),e&&(Q("An error occured. Please try again."),Ne(!0))}))},children:"Submit"})})]})}),Object(l.jsx)(z.a,{children:Object(l.jsx)(K.a,{onClick:function(){return Le(!1)},color:"primary",children:"Close"})})]}),Object(l.jsxs)(H.a,{fullScreen:!0,open:De,onClose:function(){return Te(!1)},TransitionComponent:ge,children:[Object(l.jsx)(m.a,{className:t.appBar,children:Object(l.jsxs)(x.a,{children:[Object(l.jsx)(y.a,{edge:"start",color:"inherit",onClick:function(){return Te(!1)},"aria-label":"close",children:Object(l.jsx)(de.a,{})}),Object(l.jsx)(f.a,{variant:"h6",className:t.title,children:"View Decision"})]})}),Object(l.jsxs)(g.a,{children:[Object(l.jsx)("img",{alt:"decision",src:ze.imageBase64}),Object(l.jsx)(T.a,{button:!0,children:Object(l.jsx)(I.a,{primary:"Title",secondary:ze.title})}),Object(l.jsx)(v.a,{}),Object(l.jsx)(T.a,{button:!0,children:Object(l.jsx)(I.a,{primary:"Issued By",secondary:ze.issuedby})}),Object(l.jsx)(v.a,{}),Object(l.jsx)(T.a,{button:!0,children:Object(l.jsx)(I.a,{primary:"Summary",secondary:ze.summary})}),Object(l.jsx)(v.a,{}),Object(l.jsx)(T.a,{button:!0,children:Object(l.jsx)(I.a,{primary:"Date",secondary:ze.date})}),Object(l.jsx)(v.a,{})]})]}),Object(l.jsxs)(H.a,{open:We,onClose:function(){return Re(!1)},"aria-labelledby":"form-dialog-title",children:[Object(l.jsx)(J.a,{id:"form-dialog-title",children:Vt}),Object(l.jsxs)(Y.a,{children:[Object(l.jsx)(X.a,{error:kt,value:Ke,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",label:"Title",name:"title",autoComplete:"title",helperText:kt?"Required":"",onChange:function(e){""===e.target.value?(Bt(!0),Xe(e.target.value)):(Bt(!1),Xe(e.target.value))},onBlur:function(){""===Ke&&Bt(!0)},autoFocus:!0}),Object(l.jsxs)(ie.a,{variant:"outlined",fullWidth:!0,children:[Object(l.jsx)(ae.a,{id:"demo-simple-select-outlined-label",children:"Issuers"}),Object(l.jsx)(re.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:wt,renderValue:function(e){return e.join(", ")},onChange:function(e){Ct(e.target.value)},input:Object(l.jsx)(te.a,{id:"select-multiple-chip"}),MenuProps:ba,children:ht.map((function(e){return Object(l.jsxs)(ne.a,{value:e,children:[Object(l.jsx)(se.a,{checked:wt.indexOf(e)>-1}),Object(l.jsx)(I.a,{primary:e})]},e)}))})]}),Object(l.jsx)(C.a,{component:"ul",className:t.paperChips,children:wt.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)(ce.a,{label:e,className:t.chip,onDelete:(a=e,function(){Ct((function(e){return e.filter((function(e){return e!==a}))}))})})},e);var a}))}),Object(l.jsx)(X.a,{error:Pt,value:$e,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,multiline:!0,id:"summary",label:"Summary",name:"summary",autoComplete:"summary",helperText:Pt?"Required":"",onChange:function(e){""===e.target.value?(It(!0),et(e.target.value)):(It(!1),et(e.target.value))},onBlur:function(){""===$e&&It(!0)}}),Object(l.jsxs)(ie.a,{variant:"outlined",fullWidth:!0,children:[Object(l.jsx)(ae.a,{id:"demo-simple-select-outlined-label",children:"Tags"}),Object(l.jsx)(re.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:gt,renderValue:function(e){return e.join(", ")},onChange:function(e){ft(e.target.value)},input:Object(l.jsx)(te.a,{id:"select-multiple-chip"}),MenuProps:ba,children:ut.map((function(e){return Object(l.jsxs)(ne.a,{value:e,children:[Object(l.jsx)(se.a,{checked:gt.indexOf(e)>-1}),Object(l.jsx)(I.a,{primary:e})]},e)}))})]}),Object(l.jsx)(C.a,{component:"ul",className:t.paperChips,children:gt.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)(ce.a,{label:e,className:t.chip,onDelete:(a=e,function(){ft((function(e){return e.filter((function(e){return e!==a}))}))})})},e);var a}))}),Object(l.jsx)(je.a,{utils:ue.a,children:Object(l.jsx)(be.a,{disableToolbar:!0,fullWidth:!0,variant:"outlined",margin:"normal",id:"date",label:"Date",value:st,onChange:function(e){return ot(e)},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(l.jsxs)(Z.a,{container:!0,direction:"column",spacing:1,className:t.dflex,children:[Object(l.jsx)(Z.a,{item:!0,xs:9,children:Object(l.jsx)(X.a,{error:$t,value:Kt,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,disabled:!0,id:"image",label:"Image",name:"image",helperText:$t?"Required":"",onChange:function(e){""===e.target.value?ea(!0):ea(!1)}})}),Object(l.jsxs)(Z.a,{item:!0,xs:3,children:[Object(l.jsx)("input",{accept:"image/*",className:t.input,id:"contained-button-file",type:"file",style:{display:"none"},onChange:function(e){Yt(e.target.files[0]),Xt(e.target.files[0].name)}}),Object(l.jsx)("label",{htmlFor:"contained-button-file",children:Object(l.jsx)(K.a,{variant:"contained",color:"primary",component:"span",fullWidth:!0,children:"Browse"})})]})]})]}),Object(l.jsxs)(z.a,{children:[Object(l.jsx)(K.a,{onClick:function(){return Re(!1)},variant:"contained",children:"Cancel"}),Object(l.jsx)(K.a,{onClick:function(){var e=new FormData;e.append("file",zt),e.append("title",Ke),e.append("summary",$e),e.append("tags",ut),e.append("issuedby",nt),e.append("date",st),Oe.create({baseURL:window.location.origin}),Oe.post("/api/upload_decisions/new",e).then((function(e){console.log(e),Re(!1)})).catch((function(e){console.log(e),e&&(Q("An error occured. Please try again."),Ne(!0))}))},color:"primary",variant:"contained",children:Vt})]})]})]})]})})}}).call(this,a(241).Buffer)},250:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(0),r=a.n(i),c=a(14),s=a.n(c),o=a(126),l=a(87),d=a(88),u=a(108),j=a(107),b=a(18),p=a(7),h=a(72),O=a(293),m=a(26),x=a(254),g=a(83),f=a(256),v=a(111),y=a(252),w=a(76),C=a(263),S=a(104),N=a.n(S),k=a(43),B=a(39),D=a(253),T=a(110),P=a(134),I=a(133),W=a(257),R=a(132),q=a(180),A=a(41),E=a(122),L=r.a.forwardRef((function(e,t){return Object(n.jsx)(q.a,Object(h.a)({direction:"up",ref:t},e))}));function U(){return Object(n.jsxs)(k.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(y.a,{color:"inherit",href:"http://www.eelu.edu.eg/",children:"National Egyptian E-Learning University"})," ",(new Date).getFullYear(),"."]})}var F=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function V(){var e=F(),t=Object(i.useState)(""),a=Object(p.a)(t,2),r=a[0],c=a[1],s=Object(i.useState)(""),o=Object(p.a)(s,2),l=o[0],d=o[1],u=Object(i.useState)(!1),j=Object(p.a)(u,2),b=j[0],h=j[1],S=Object(i.useState)(!1),B=Object(p.a)(S,2),q=B[0],V=B[1],M=Object(i.useState)(!1),_=Object(p.a)(M,2),H=_[0],z=_[1],Y=Object(i.useState)(""),G=Object(p.a)(Y,2),J=G[0],K=G[1];return Object(n.jsxs)(D.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(x.a,{}),Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(O.a,{className:e.avatar,children:Object(n.jsx)(N.a,{})}),Object(n.jsx)(k.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(n.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(n.jsx)(g.a,{error:b,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",helperText:b?"Required":"",onChange:function(e){""===e.target.value?h(!0):(h(!1),c(e.target.value))},onBlur:function(){""===r&&h(!0)},autoFocus:!0}),Object(n.jsx)(g.a,{error:q,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",helperText:q?"Required":"",onChange:function(e){""===e.target.value?V(!0):(V(!1),d(e.target.value))},onBlur:function(){""===l&&V(!0)},autoComplete:"current-password"}),Object(n.jsx)(f.a,{control:Object(n.jsx)(v.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(n.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault(),e.stopPropagation(),r&&l?(E.create({baseURL:window.location.origin}),E.post("/api/user/login",{email:r,password:l}).then((function(e){console.log(e),A.a.push({pathname:"/dashboard",state:{privilege:e.data.privilege}})})).catch((function(e){console.log(e),"Request failed with status code 401"===e.message?(K("Wrong email/password."),z(!0),h(!0),d(!0)):K("An error occured. Please try again.")}))):(K("Please fill all required fields."),z(!0))},children:"Sign In"}),Object(n.jsxs)(T.a,{open:H,TransitionComponent:L,keepMounted:!0,onClose:function(){return z(!1)},"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(n.jsx)(R.a,{id:"alert-dialog-slide-title",children:"Error"}),Object(n.jsx)(I.a,{children:Object(n.jsx)(W.a,{id:"alert-dialog-slide-description",children:J})}),Object(n.jsx)(P.a,{children:Object(n.jsx)(m.a,{onClick:function(){return z(!1)},color:"primary",children:"Close"})})]}),Object(n.jsxs)(w.a,{container:!0,children:[Object(n.jsx)(w.a,{item:!0,xs:!0,children:Object(n.jsx)(y.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(n.jsx)(w.a,{item:!0,children:Object(n.jsx)(y.a,{href:"#",variant:"body2",onClick:function(){return A.a.push("/register")},children:"Don't have an account? Sign Up"})})]})]})]}),Object(n.jsx)(C.a,{mt:8,children:Object(n.jsx)(U,{})})]})}var M=a(122),_=r.a.forwardRef((function(e,t){return Object(n.jsx)(q.a,Object(h.a)({direction:"up",ref:t},e))}));function H(){return Object(n.jsxs)(k.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(y.a,{color:"inherit",href:"http://www.eelu.edu.eg/",children:"National Egyptian E-Learning University"})," ",(new Date).getFullYear(),"."]})}var z=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function Y(){var e=z(),t=Object(i.useState)(""),a=Object(p.a)(t,2),r=a[0],c=a[1],s=Object(i.useState)(""),o=Object(p.a)(s,2),l=o[0],d=o[1],u=Object(i.useState)(""),j=Object(p.a)(u,2),b=j[0],h=j[1],f=Object(i.useState)(""),v=Object(p.a)(f,2),S=v[0],B=v[1],q=Object(i.useState)(!1),E=Object(p.a)(q,2),L=E[0],U=E[1],F=Object(i.useState)(!1),V=Object(p.a)(F,2),Y=V[0],G=V[1],J=Object(i.useState)(!1),K=Object(p.a)(J,2),X=K[0],Q=K[1],Z=Object(i.useState)(!1),$=Object(p.a)(Z,2),ee=$[0],te=$[1],ae=Object(i.useState)(!1),ne=Object(p.a)(ae,2),ie=ne[0],re=ne[1],ce=Object(i.useState)(""),se=Object(p.a)(ce,2),oe=se[0],le=se[1];return Object(n.jsxs)(D.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(x.a,{}),Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(O.a,{className:e.avatar,children:Object(n.jsx)(N.a,{})}),Object(n.jsx)(k.a,{component:"h1",variant:"h5",children:"Register"}),Object(n.jsx)("form",{className:e.form,noValidate:!0,children:Object(n.jsxs)(w.a,{container:!0,spacing:2,children:[Object(n.jsx)(w.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(g.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,error:X,id:"firstName",label:"First Name",autoFocus:!0,onChange:function(e){""===e.target.value?Q(!0):(Q(!1),h(e.target.value))},onBlur:function(){""===b&&Q(!0)}})}),Object(n.jsx)(w.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,error:ee,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:function(e){""===e.target.value?te(!0):(te(!1),B(e.target.value))},onBlur:function(){""===S&&te(!0)}})}),Object(n.jsx)(w.a,{item:!0,xs:12,children:Object(n.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,error:L,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:function(e){""===e.target.value?U(!0):(U(!1),c(e.target.value))},onBlur:function(){""===r&&U(!0)}})}),Object(n.jsx)(w.a,{item:!0,xs:12,children:Object(n.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,error:Y,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){""===e.target.value?G(!0):(G(!1),d(e.target.value))},onBlur:function(){""===l&&G(!0)}})}),Object(n.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault(),e.stopPropagation(),r&&l&&b&&S?(M.create({baseURL:window.location.origin}),M.post("/api/user/register",{email:r,password:l,firstName:b,lastName:S}).then((function(e){console.log(e),A.a.push({pathname:"/dashboard",state:{privilege:e.data.privilege}})})).catch((function(e){console.log(e),"Request failed with status code 409"===e.message?(le("Email already exists."),re(!0),U(!0),d(!0)):le("An error occured. Please try again.")}))):(le("Please fill all required fields."),re(!0))},children:"Register"}),Object(n.jsxs)(T.a,{open:ie,TransitionComponent:_,keepMounted:!0,onClose:function(){return re(!1)},"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(n.jsx)(R.a,{id:"alert-dialog-slide-title",children:"Error"}),Object(n.jsx)(I.a,{children:Object(n.jsx)(W.a,{id:"alert-dialog-slide-description",children:oe})}),Object(n.jsx)(P.a,{children:Object(n.jsx)(m.a,{onClick:function(){return re(!1)},color:"primary",children:"Close"})})]}),Object(n.jsx)(w.a,{container:!0,justify:"flex-end",children:Object(n.jsx)(w.a,{item:!0,children:Object(n.jsx)(y.a,{href:"#",variant:"body2",onClick:function(){return A.a.push("/login")},children:"Already have an account? Login"})})})]})})]}),Object(n.jsx)(C.a,{mt:5,children:Object(n.jsx)(H,{})})]})}var G=a(167),J=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsx)(b.b,{history:A.a,children:Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{path:"/",exact:!0,component:V}),Object(n.jsx)(b.a,{path:"/login",component:V}),Object(n.jsx)(b.a,{path:"/register",component:Y}),Object(n.jsx)(b.a,{path:"/dashboard",component:G.a})]})})}}]),a}(i.Component);s.a.render(Object(n.jsx)(o.a,{children:Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(J,{})})}),document.getElementById("root"))},41:function(e,t,a){"use strict";var n=a(31);t.a=Object(n.a)()}},[[250,1,2]]]);
//# sourceMappingURL=main.781ea566.chunk.js.map